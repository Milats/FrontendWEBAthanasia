<div class="container-fluid page">
    <div class="d-flex page__box p-3 mt-2">Shopping</div>
    <div class="page__content shadow">
        <div class="newSale">
            <div class="details">
                <button mat-raised-button (click)="openProductDialog()">Search Product</button>
                <form [formGroup]="addProduct">
                    <mat-form-field appearance="fill">
                        <mat-label>Product</mat-label>
                        <input matInput type="text" formControlName="ProductName">
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Qty.</mat-label>
                        <input matInput type="number" formControlName="ProductQuantity" 
                        (input)="calculateProductTotal(quantity.value);" #quantity>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Product Total</mat-label>
                        <input matInput type="text" formControlName="ProductTotal">
                    </mat-form-field>
                    <button type="submit" mat-raised-button  [disabled]="!addProduct.valid"
                    (click)="addSaleDetail(quantity.value)">Confirm</button>
                </form> 
            </div>
            <button mat-raised-button (click)="openClientDialog()">Search Client</button>
            <div class="productsbill">
                <div class="productListTable">
                    <table class="page__content-data" mat-table [dataSource]="saleDetailsTable" 
                    class="mat-elevation-24"> 
                        <ng-container matColumnDef="Name">
                            <th mat-header-cell *matHeaderCellDef>Name</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.Name }}</td>
                                <td mat-footer-cell *matFooterCellDef> Total </td>
                        </ng-container>
                        <ng-container matColumnDef="Qty.">
                            <th mat-header-cell *matHeaderCellDef>Qty.</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.Quantity }}</td>
                                <td mat-footer-cell *matFooterCellDef> {{ getTotal() | currency}}</td>
                        </ng-container>
                        <ng-container matColumnDef="Subtotal">
                            <th mat-header-cell *matHeaderCellDef>Subtotal</th>
                            <td mat-cell *matCellDef="let element">
                                {{ element.Subtotal | currency}}</td>
                                <td mat-footer-cell *matFooterCellDef> Total(IVA) </td>
                        </ng-container> 
                        <ng-container matColumnDef="Options">
                            <th mat-header-cell *matHeaderCellDef></th>
                            <td mat-cell *matCellDef="let element">
                                <button  mat-raised-button color="basic"
                                (click)="removeSaleDetail(element)">Remove</button>
                            </td>
                            <td mat-footer-cell *matFooterCellDef> {{ getTotal() * 1.1 | currency}}</td>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="tableBillColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: tableBillColumns;"></tr>
                        <tr mat-footer-row *matFooterRowDef="tableBillColumns"></tr>
                </table>
                </div>
                <div class="billInformation">
                    <button mat-raised-button color="primary" (click)="addSale()" 
                      color="primary" [disabled]="saleDetailsTable.length === 0">Checkout</button>
                </div>
            </div>       
        </div>
    </div>
  </div>